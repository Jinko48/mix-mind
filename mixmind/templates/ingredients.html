{# template for admin to manage ingredient stock #}
{% extends "dashboard.html" %}
{% from "_macros.html" import show_flashed, render_field %}
{% block dashbody %}

<h3>Ingredient Editor</h3>
{{ show_flashed() }}
<form  id="upload_csv" action="" method="post" role="form" enctype="multipart/form-data">
	{{ upload_form.csrf }}
	<a href="#add-barstock" data-toggle="collapse"><h3>Upload Bar Stock File</h3></a>
	<div id="add-barstock" class="collapse">
		{{ render_field(upload_form.upload_csv) }}
		{{ render_field(upload_form.replace_existing) }}
		<input type="submit" class="btn btn-primary" target="_blank" name="upload-csv" value="Upload"></input>
	</div>
</form>
<form  id="add-settings" action="" method="post" role="form">
	{{ form.csrf }}
	<a href="#add-ingredient" data-toggle="collapse"><h3>Add an Ingredient</h3></a>
	<div id="add-ingredient" class="collapse">
		{{ render_field(form.bottle) }}
		{{ render_field(form.category) }}
		{{ render_field(form.type_) }}
		{{ render_field(form.proof) }}
		{{ render_field(form.size_ml) }}
		{{ render_field(form.price) }}
		<input type="submit" class="btn btn-success" target="_blank" name="add-ingredient" value="Add"></input>
	</div>
</form>

<div class="row">
	<h3 class="col-auto">Ingredient Stock for {{ g.current_bar.cname }}</h3>
	<form id="refresh-recipes" action="" method="post" role="form">
		<input type="submit" class="btn btn-primary col-auto" target="_blank" name="reload-recipes" value="Refresh Recipes from these Ingredients"></input>
	</form>
</div>
{{ stock_table | safe }}
<script type=text/javascript>
$(document).ready( function () {
	$('#ingredient_table').DataTable( {
		"paging": false
		{#
		"columns": [
			{
				"sortable": true,
				className: 'centerize',
				render: function ( data, type, full, meta ) {
					return '<input id="toggle-demo" type="checkbox" checked data-toggle="toggle" data-on="Ready" data-off="Not Ready" data-onstyle="success" data-offstyle="danger">';
				},
				"fnDrawCallback": function() {
					$('#toggle-demo').bootstrapToggle();
				},
			}
		]
		#}
		});
} );
</script>

{% endblock dashbody %}
